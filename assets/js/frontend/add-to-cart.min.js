/*!
 * LS Add to Cart JS
 */
jQuery(document).ready(function(a){function b(){jQuery(".widget_shopping_cart_content .remove:not(.confirmation)").addClass("confirmation").confirmation({content:"Remove ?",container:".widget_shopping_cart_content",buttons:[{class:"btn btn-primary",label:"Yes",onClick:function(){var a=jQuery(this);jQuery(document.body).trigger("body_curtain_on");var b=c(a.attr("href")).remove_item;jQuery.ajax({type:"POST",dataType:"json",url:"/wp-admin/admin-ajax.php",data:{action:"ls_product_remove",cart_item_key:b},success:function(b){b&&(jQuery(document.body).trigger("body_curtain_off"),1==b.status&&(jQuery(".header-cart .total-count").html(b.totalCount),jQuery(".mini-cart-title .total-count").html(b.totalCount),0==b.totalCount?jQuery(".widget_shopping_cart_content").html('<ul class="cart_list product_list_widget "><li class="empty">No products in the cart.</li></ul>'):(jQuery(".widget_shopping_cart_content .woocommerce-Price-amount").html(b.subtotal),a.closest(".mini_cart_item").remove())))}})}},{class:"btn btn-default",label:"No",cancel:!0}]})}function c(a){var b=a?a.split("?")[1]:window.location.search.slice(1),c={};if(b){b=b.split("#")[0];for(var d=b.split("&"),e=0;e<d.length;e++){var f=d[e].split("="),g=void 0,h=f[0].replace(/\[\d*\]/,function(a){return g=a.slice(1,-1),""}),i="undefined"==typeof f[1]||f[1];h=h.toLowerCase(),i=i.toLowerCase(),c[h]?("string"==typeof c[h]&&(c[h]=[c[h]]),"undefined"==typeof g?c[h].push(i):c[h][g]=i):c[h]=i}}return c}jQuery("body").on("click",".single_add_to_cart_button",function(b){b.preventDefault(),b.stopPropagation();var c=jQuery(this);if(c.hasClass("disabled"))return!1;var d=c.closest("form.cart"),e=d.find("input[name=add-to-cart]").val()||0,f=d.find("input[name=quantity]").val()||1,g={action:"ls_add_product",product_id:e,quantity:f};if(d.hasClass("variations_form")){jQuery(".variation-error").remove();var h=d.find("input[name=variation_id]").val()||0,i=d.find("select[name^=attribute]"),j={},k=!0;if(i.length||(i=d.find("[name^=attribute]:checked")),i.length||(i=d.find("input[name^=attribute]")),i.each(function(){var e,f,b=a(this),c=b.attr("name"),d=b.val();b.removeClass("error"),0===d.length?(e=c.lastIndexOf("_"),f=c.substring(e+1),b.addClass("required error").after('<div class="variation-error"><p>Please select '+f+"</p></div>"),k=!1):j[c]=d}),!k)return c.removeClass("disabled loader"),!1;g.variation_id=h,g.variation=j}return jQuery(document.body).trigger("adding_to_cart",[c,g]),jQuery.ajax({type:"POST",dataType:"json",url:"/wp-admin/admin-ajax.php",data:g,success:function(b){var d=jQuery(".content-area").prev(".woocommerce");0===b.status?d.length&&(a(document.body).trigger("adding_to_cart_after_error",c),d.html('<div class="woocommerce-error">'+b.message+"</div>"),jQuery("body,html").animate({scrollTop:d.offset().top-80},"slow")):(d.html(""),jQuery(".widget_shopping_cart_content").html(b.cart),jQuery(".header-cart .total-count").html(b.totalCount),jQuery(".mini-cart-title .total-count").html(b.totalCount),a(document.body).trigger("added_to_cart",[{},"",c]))}}),!1}),jQuery("body").on("click",".widget_shopping_cart_content .remove:not(.confirmation)",function(a){a.preventDefault(),a.stopPropagation(),b(),jQuery(this).confirmation("show")})});
